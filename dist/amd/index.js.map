{"version":3,"sources":["../../src/index.js"],"names":[],"mappings":"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","file":"src/index.js","sourcesContent":["var protocol = window.location.href.split('://')[0];\nif (protocol === 'file') { protocol = 'http'; }\n\nvar base_url = `${protocol}://alfafile.net/api/v1`;\n\nvar token = '';\n\nconst UPL_STATE_UPLOADING = 0;\nconst UPL_STATE_PROCESSING = 1;\nconst UPL_STATE_DONE = 2;\nconst UPL_STATE_FAIL = 3;\n\nclass ApiError extends Error {\n  constructor(message) {\n    super();\n    this.name = 'ApiError';\n    this.message = message;\n  }\n}\n\nclass NetworkError extends Error {\n  constructor(message) {\n    super();\n    this.name = 'NetworkError';\n    this.message = message;\n  }\n}\n\n\nvar _doCheckUploadState = function(params, upload_id, cb) {\n  params.token = params.token || token;\n\n  let params_str = 'upload_id=' + (encodeURIComponent(upload_id));\n  params_str += '&token=' + (encodeURIComponent(params.token));\n\n  var check_int = setInterval(() => {\n    let xhr = new XMLHttpRequest();\n    xhr.open('GET', `${base_url}/file/upload_info?${params_str}`, true);\n    xhr.onreadystatechange = function() {\n      if (xhr.readyState === 4 && xhr.status === 200) {\n        let data = JSON.parse(xhr.responseText);\n        if (data.response.upload.state !== UPL_STATE_PROCESSING) {\n          if (cb && typeof cb === 'function') {\n            clearInterval(check_int);\n            return cb(null, data.response.upload);\n          }\n        }\n      } else if (xhr.readyState === 4 && xhr.status !== 200) {\n        if (cb && typeof cb === 'function') {\n          return cb(new NetworkError('NetworkError'));\n        }\n      }\n    };\n    xhr.send();\n  }, 1000);\n};\n\nvar _doFileUpload = function(params, upload_url, cb) {\n  let form_data = new FormData();\n  \n  form_data.append('file', params.file);\n  form_data.append('token', params.token || token);\n\n  let upload_progress = function(event) {\n    if (event.lengthComputable) {\n      if (params.progress_cb && typeof params.progress_cb === 'function') {\n        return params.progress_cb(Math.ceil(event.loaded / event.total * 100));\n      }\n    }\n  };\n\n  let xhr = new XMLHttpRequest();\n  xhr.open('POST', upload_url, true);\n  xhr.upload.onprogress = upload_progress;\n  if (params.abort_cb && typeof params.abort_cb === 'function') {\n    xhr.onabort = params.abort_cb;\n  }\n\n  xhr.onreadystatechange = function() {\n    var data, response;\n    if (xhr.readyState === 4 && xhr.status === 200) {\n      data = JSON.parse(xhr.responseText);\n      response = data.response;\n      if (data.status === 200) {\n        return _doCheckUploadState(params, response.upload.upload_id, cb);\n      } else {\n        if (cb && typeof cb === 'function') {\n          return cb(new ApiError('' + (data ? data.details : '')));\n        }\n      }\n    } else if (xhr.readyState === 4 && xhr.status !== 200) {\n      if (cb && typeof cb === 'function') {\n        return cb(new NetworkError('Network error'));\n      }\n    }\n  };\n\n  xhr.send(form_data);\n\n  if (params.upload_xhr_available && typeof params.upload_xhr_available === 'function') {\n    return params.upload_xhr_available(xhr);\n  }\n};\n\nvar _itemMethodHelper = function(itype, method, params, response_field, cb) {\n  params = params || {};\n  params.token = params.token || token;\n\n  let params_str = '';\n  Object.keys(params).forEach(key => {\n    let val = params[key];\n    if (typeof val !== 'function') {\n      params_str += `${key}=${encodeURIComponent(val)}&`;\n    }\n  });\n\n  let xhr = new XMLHttpRequest();\n  xhr.open('GET', `${base_url}/${itype}/${method}?${params_str}`, true);\n  xhr.onreadystatechange = function() {\n    if (xhr.readyState === 4 && xhr.status === 200) {\n      let data = JSON.parse(xhr.responseText);\n\n      if (data.status === 200 && data.response) {\n        // return the default result or a special field?\n        let result = response_field ? data.response[response_field] : data.response;\n\n        // two-level method or not?\n        let twolevel = false;\n\n        if (itype === 'user' && method === 'login') {\n          token = data.response.token; // set global token on login\n        } else if (itype === 'file' && method === 'upload') { // file upload method\n          let up_state = data.response.upload.state;\n          if (up_state === UPL_STATE_UPLOADING) {\n            twolevel = true; // it's a two-level operation\n            _doFileUpload(params, data.response.upload.url, cb);\n          }\n        }\n        // by default: call passed callback with a response result\n        if (cb && typeof cb === 'function' && !twolevel) {\n          cb(null, result);\n        }\n      } else {\n        // once the response status in not 200, we should pass an ApiError to callback\n        if (cb && typeof cb === 'function') {\n          cb(new ApiError('' + (data ? data.details : '')));\n        }\n      }\n    } else if (xhr.readyState === 4 && xhr.status === 200) {\n      if (cb && typeof cb === 'function') {\n        cb(new NetworkError('Network error'));\n      }\n    }\n  };\n\n  xhr.send();\n};\n\nvar userLogin = function(login, password, cb) {\n  return _itemMethodHelper('user', 'login', {\n    login: login,\n    password: password\n  }, 'user', cb);\n};\n\nvar userInfo = function(cb) {\n  return _itemMethodHelper('user', 'info', {}, 'user', cb);\n};\n\nvar fileUpload = function(name, hash, size, file, options, cb) {\n  let args = Array.prototype.slice.call(arguments), \n      params = {};\n  cb = args.pop();\n\n  if (args.length === 5) {\n    params = options;\n  }\n\n  params.name = name;\n  params.hash = hash;\n  params.size = size;\n  params.file = file;\n\n  return _itemMethodHelper('file', 'upload', params, 'upload', cb);\n};\n\nvar fileRename = function(file_id, name, cb) {\n  let params = {\n    file_id: file_id,\n    name: name\n  };\n  return _itemMethodHelper('file', 'rename', params, 'file', cb);\n};\n\nvar fileDelete = function(file_id, cb) {\n  let params = {\n    file_id: file_id\n  };\n  return _itemMethodHelper('file', 'delete', params, 'result', cb);\n};\n\nvar fileCopy = function(file_id, folder_id_dest, cb) {\n  let params = {\n    file_id: file_id,\n    folder_id_dest: folder_id_dest\n  };\n  return _itemMethodHelper('file', 'copy', params, 'result', cb);\n};\n\nvar fileMove = function(file_id, folder_id_dest, cb) {\n  let params = {\n    file_id: file_id,\n    folder_id_dest: folder_id_dest\n  };\n  return _itemMethodHelper('file', 'move', params, 'result', cb);\n};\n\nvar fileChangeMode = function(file_id, mode, cb) {\n  let params = {\n    file_id: file_id,\n    mode: mode\n  };\n  return _itemMethodHelper('file', 'change_mode', params, 'file', cb);\n};\n\nvar folderInfo = function(options, cb) {\n  let args = Array.prototype.slice.call(arguments),\n      params = {};\n  cb = args.pop();\n  if (args.length === 1) {\n    params = options;\n  }\n\n  return _itemMethodHelper('folder', 'info', params, 'folder', cb);\n};\n\nvar folderContent = function(options, cb) {\n  let args = Array.prototype.slice.call(arguments),\n      params = {};\n  cb = args.pop();\n  if (args.length === 1) {\n    params = options;\n  }\n\n  return _itemMethodHelper('folder', 'content', params, 'folder', cb);\n};\n\nvar folderCreate = function(name, options, cb) {\n  let args = Array.prototype.slice.call(arguments), \n      params = {name: name};\n  \n  cb = args.pop();\n  if (args.length === 2) {\n    Object.keys(options).forEach(key => {\n      params[key] = options[key];\n    });\n  }\n\n  return _itemMethodHelper('folder', 'create', params, 'folder', cb);\n};\n\nvar folderRename = function(folder_id, name, cb) {\n  var params = {\n    name: name,\n    folder_id: folder_id\n  };\n\n  return _itemMethodHelper('folder', 'rename', params, 'folder', cb);\n};\n\nvar folderDelete = function(folder_id, cb) {\n  var params = {\n    folder_id: folder_id\n  };\n\n  return _itemMethodHelper('folder', 'delete', params, 'result', cb);\n};\n\nvar folderCopy = function(folder_id, folder_id_dest, cb) {\n  var params = {\n    folder_id: folder_id,\n    folder_id_dest: folder_id_dest\n  };\n\n  return _itemMethodHelper('folder', 'copy', params, 'result', cb);\n};\n\nvar folderMove = function(folder_id, folder_id_dest, cb) {\n  var params = {\n    folder_id: folder_id,\n    folder_id_dest: folder_id_dest\n  };\n\n  return _itemMethodHelper('folder', 'move', params, 'result', cb);\n};\n\nvar folderChangeMode = function(folder_id, mode, cb) {\n  var params = {\n    folder_id: folder_id,\n    mode: mode\n  };\n\n  return _itemMethodHelper('folder', 'change_mode', params, 'folder', cb);\n};\n\nvar trashcanContent = function(cb) {\n  return _itemMethodHelper('trashcan', 'content', {}, null, cb);\n};\n\nvar trashcanEmpty = function(options, cb) {\n  let args = Array.prototype.slice.call(arguments), \n      params = {};\n\n  cb = args.pop();\n  if (args.length === 1) {\n    params = options;\n  }\n\n  return _itemMethodHelper('trashcan', 'empty', params, 'result', cb);\n};\n\nvar trashcanRestore = function(options, cb) {\n  let args = Array.prototype.slice.call(arguments), \n      params = {};\n\n  cb = args.pop();\n  if (args.length === 1) {\n    params = options;\n  }\n\n  return _itemMethodHelper('trashcan', 'restore', params, 'result', cb);\n};\n\nvar remoteCreate = function(url, options, cb) {\n  let args = Array.prototype.slice.call(arguments), \n      params = {};\n\n  cb = args.pop();\n  if (args.length === 2) {\n    params = options;\n  }\n  params.url = url;\n\n  return _itemMethodHelper('remote', 'create', params, '', cb);\n};\n\nvar remoteDelete = function(job_id, cb) {\n  var params = {\n    job_id: job_id\n  };\n\n  return _itemMethodHelper('remote', 'delete', params, 'result', cb);\n};\n\nvar remoteInfo = function(options, cb) {\n  let args = Array.prototype.slice.call(arguments), \n      params = {};\n\n  cb = args.pop();\n  if (args.length === 1) {\n    params = options;\n  }\n\n  return _itemMethodHelper('remote', 'info', params, '', cb);\n};\n\nvar onetimeCreate = function(file_id, options, cb) {\n  let args = Array.prototype.slice.call(arguments), \n      params = {};\n\n  cb = args.pop();\n  if (args.length === 2) {\n    params = options;\n  }\n  params.file_id = file_id;\n\n  return _itemMethodHelper('one_time_download', 'create', params, 'download', cb);\n};\n\nvar onetimeInfo = function(options, cb) {\n  let args = Array.prototype.slice.call(arguments), \n      params = {};\n  cb = args.pop();\n  if (args.length === 1) {\n    params = options;\n  }\n\n  return _itemMethodHelper('one_time_download', 'info', params, '', cb);\n};\n\n\n// this is the entry point for your library\nvar AFClient = {\n  _setToken: function(newToken) {\n    token = newToken;\n  },\n  _setBaseUrl: function(newBaseUrl) {\n    base_url = newBaseUrl;\n  },\n  ApiError: ApiError,\n  NetworkError: NetworkError,\n  userLogin: userLogin,\n  userInfo: userInfo,\n  fileUpload: fileUpload,\n  fileRename: fileRename,\n  fileDelete: fileDelete,\n  fileMove: fileMove,\n  fileCopy: fileCopy,\n  fileChangeMode: fileChangeMode,\n  folderInfo: folderInfo,\n  folderContent: folderContent,\n  folderCreate: folderCreate,\n  folderRename: folderRename,\n  folderDelete: folderDelete,\n  folderCopy: folderCopy,\n  folderMove: folderMove,\n  folderChangeMode: folderChangeMode,\n  trashcanContent: trashcanContent,\n  trashcanEmpty: trashcanEmpty,\n  trashcanRestore: trashcanRestore,\n  remoteCreate: remoteCreate,\n  remoteDelete: remoteDelete,\n  remoteInfo: remoteInfo,\n  onetimeCreate: onetimeCreate,\n  onetimeInfo: onetimeInfo,\n\n  promised: {}\n};\n\nlet except = ['_setToken', '_setBaseUrl', 'ApiError', 'NetworkError'];\nObject.keys(AFClient).forEach(key => {\n  let method = AFClient[key];\n  // check if it's an API method\n  if (except.indexOf(key) >= 0 || typeof method !== 'function') {\n    return;\n  }\n\n  AFClient.promised[key] = function() {\n    let args = Array.prototype.slice.call(arguments);\n    return new Promise((resolve, reject) => {\n      let cb = function (err, result) {\n        if (err) { reject(err); } else { resolve(result); }\n      };\n      args.push(cb);\n\n      AFClient[key].apply(null, args);\n    });\n  };\n});\n\nexport default AFClient;\n"]}