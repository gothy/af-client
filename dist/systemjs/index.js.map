{"version":3,"sources":["../../src/index.js"],"names":[],"mappings":"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","file":"src/index.js","sourcesContent":["var protocol = window.location.href.split('://')[0];\nif (protocol === 'file') { protocol = 'http'; }\n\nvar base_url = `${protocol}://alfafile.net/api/v1`;\n\nvar token = '';\n\nconst UPL_STATE_UPLOADING = 0;\nconst UPL_STATE_PROCESSING = 1;\nconst UPL_STATE_DONE = 2;\nconst UPL_STATE_FAIL = 3;\n\nclass ApiError extends Error {\n  constructor(message) {\n    super();\n    this.name = 'ApiError';\n    this.message = message;\n  }\n}\n\nclass NetworkError extends Error {\n  constructor(message) {\n    super();\n    this.name = 'NetworkError';\n    this.message = message;\n  }\n}\n\n\nvar _doCheckUploadState = function(params, upload_id, cb) {\n  params.token = params.token || token;\n\n  let params_str = 'upload_id=' + (encodeURIComponent(upload_id));\n  params_str += '&token=' + (encodeURIComponent(params.token));\n\n  var check_int = setInterval(() => {\n    let xhr = new XMLHttpRequest();\n    xhr.open('GET', `${base_url}/file/upload_info?${params_str}`, true);\n    xhr.onreadystatechange = function() {\n      if (xhr.readyState === 4 && xhr.status === 200) {\n        let data = JSON.parse(xhr.responseText);\n        if (data.response.upload.state !== UPL_STATE_PROCESSING) {\n          if (cb && typeof cb === 'function') {\n            clearInterval(check_int);\n            return cb(null, data.response.upload);\n          }\n        }\n      } else if (xhr.readyState === 4 && xhr.status !== 200) {\n        if (cb && typeof cb === 'function') {\n          return cb(new NetworkError('NetworkError'));\n        }\n      }\n    };\n    xhr.send();\n  }, 1000);\n};\n\nvar _doFileUpload = function(params, upload_url, cb) {\n  let form_data = new FormData();\n  \n  form_data.append('file', params.file);\n  form_data.append('token', params.token || token);\n\n  let upload_progress = function(event) {\n    if (event.lengthComputable) {\n      if (params.progress_cb && typeof params.progress_cb === 'function') {\n        return params.progress_cb(Math.ceil(event.loaded / event.total * 100));\n      }\n    }\n  };\n\n  let xhr = new XMLHttpRequest();\n  xhr.open('POST', upload_url, true);\n  xhr.upload.onprogress = upload_progress;\n  if (params.abort_cb && typeof params.abort_cb === 'function') {\n    xhr.onabort = params.abort_cb;\n  }\n\n  xhr.onreadystatechange = function() {\n    var data, response;\n    if (xhr.readyState === 4 && xhr.status === 200) {\n      data = JSON.parse(xhr.responseText);\n      response = data.response;\n      if (data.status === 200) {\n        return _doCheckUploadState(params, response.upload.upload_id, cb);\n      } else {\n        if (cb && typeof cb === 'function') {\n          return cb(new ApiError('' + (data ? data.details : '')));\n        }\n      }\n    } else if (xhr.readyState === 4 && xhr.status !== 200) {\n      if (cb && typeof cb === 'function') {\n        return cb(new NetworkError('Network error'));\n      }\n    }\n  };\n\n  xhr.send(form_data);\n\n  if (params.upload_xhr_available && typeof params.upload_xhr_available === 'function') {\n    return params.upload_xhr_available(xhr);\n  }\n};\n\nvar _itemMethodHelper = function(itype, method, params, response_field, cb) {\n  params = params || {};\n  params.token = params.token || token;\n\n  let params_str = '';\n  Object.keys(params).forEach(key => {\n    let val = params[key];\n    if (typeof val !== 'function') {\n      params_str += `${key}=${encodeURIComponent(val)}&`;\n    }\n  });\n\n  let xhr = new XMLHttpRequest();\n  xhr.open('GET', `${base_url}/${itype}/${method}?${params_str}`, true);\n  xhr.onreadystatechange = function() {\n    if (xhr.readyState === 4 && xhr.status === 200) {\n      let data = JSON.parse(xhr.responseText);\n\n      if (data.status === 200 && data.response) {\n        // return the default result or a special field?\n        let result = response_field ? data.response[response_field] : data.response;\n\n        // two-level method or not?\n        let twolevel = false;\n\n        if (itype === 'user' && method === 'login') {\n          token = data.response.token; // set global token on login\n        } else if (itype === 'file' && method === 'upload') { // file upload method\n          let up_state = data.response.upload.state;\n          if (up_state === UPL_STATE_UPLOADING) {\n            twolevel = true; // it's a two-level operation\n            _doFileUpload(params, data.response.upload.url, cb);\n          }\n        }\n        // by default: call passed callback with a response result\n        if (cb && typeof cb === 'function' && !twolevel) {\n          cb(null, result);\n        }\n      } else {\n        // once the response status in not 200, we should pass an ApiError to callback\n        if (cb && typeof cb === 'function') {\n          cb(new ApiError('' + (data ? data.details : '')));\n        }\n      }\n    } else if (xhr.readyState === 4 && xhr.status === 200) {\n      if (cb && typeof cb === 'function') {\n        cb(new NetworkError('Network error'));\n      }\n    }\n  };\n\n  xhr.send();\n};\n\nvar userLogin = function(login, password, cb) {\n  return _itemMethodHelper('user', 'login', {\n    login: login,\n    password: password\n  }, 'user', cb);\n};\n\nvar userInfo = function(cb) {\n  return _itemMethodHelper('user', 'info', {}, 'user', cb);\n};\n\nvar fileUpload = function(name, hash, size, file, options, cb) {\n  let args = Array.prototype.slice.call(arguments), \n      params = {};\n  cb = args.pop();\n\n  if (args.length === 5) {\n    params = options;\n  }\n\n  params.name = name;\n  params.hash = hash;\n  params.size = size;\n  params.file = file;\n\n  return _itemMethodHelper('file', 'upload', params, 'upload', cb);\n};\n\nvar fileRename = function(file_id, name, cb) {\n  let params = {\n    file_id: file_id,\n    name: name\n  };\n  return _itemMethodHelper('file', 'rename', params, 'file', cb);\n};\n\nvar fileDelete = function(file_id, cb) {\n  let params = {\n    file_id: file_id\n  };\n  return _itemMethodHelper('file', 'delete', params, 'result', cb);\n};\n\nvar fileCopy = function(file_id, folder_id_dest, cb) {\n  let params = {\n    file_id: file_id,\n    folder_id_dest: folder_id_dest\n  };\n  return _itemMethodHelper('file', 'copy', params, 'result', cb);\n};\n\nvar fileMove = function(file_id, folder_id_dest, cb) {\n  let params = {\n    file_id: file_id,\n    folder_id_dest: folder_id_dest\n  };\n  return _itemMethodHelper('file', 'move', params, 'result', cb);\n};\n\nvar fileChangeMode = function(file_id, mode, cb) {\n  let params = {\n    file_id: file_id,\n    mode: mode\n  };\n  return _itemMethodHelper('file', 'change_mode', params, 'file', cb);\n};\n\nvar folderInfo = function(options, cb) {\n  let args = Array.prototype.slice.call(arguments),\n      params = {};\n  cb = args.pop();\n  if (args.length === 1) {\n    params = options;\n  }\n\n  return _itemMethodHelper('folder', 'info', params, 'folder', cb);\n};\n\nvar folderContent = function(options, cb) {\n  let args = Array.prototype.slice.call(arguments),\n      params = {};\n  cb = args.pop();\n  if (args.length === 1) {\n    params = options;\n  }\n\n  return _itemMethodHelper('folder', 'content', params, 'folder', cb);\n};\n\nvar folderCreate = function(name, options, cb) {\n  let args = Array.prototype.slice.call(arguments), \n      params = {name: name};\n  \n  cb = args.pop();\n  if (args.length === 2) {\n    Object.keys(options).forEach(key => {\n      params[key] = options[key];\n    });\n  }\n\n  return _itemMethodHelper('folder', 'create', params, 'folder', cb);\n};\n\nvar folderRename = function(folder_id, name, cb) {\n  var params = {\n    name: name,\n    folder_id: folder_id\n  };\n\n  return _itemMethodHelper('folder', 'rename', params, 'folder', cb);\n};\n\nvar folderDelete = function(folder_id, cb) {\n  var params = {\n    folder_id: folder_id\n  };\n\n  return _itemMethodHelper('folder', 'delete', params, 'result', cb);\n};\n\nvar folderCopy = function(folder_id, folder_id_dest, cb) {\n  var params = {\n    folder_id: folder_id,\n    folder_id_dest: folder_id_dest\n  };\n\n  return _itemMethodHelper('folder', 'copy', params, 'result', cb);\n};\n\nvar folderMove = function(folder_id, folder_id_dest, cb) {\n  var params = {\n    folder_id: folder_id,\n    folder_id_dest: folder_id_dest\n  };\n\n  return _itemMethodHelper('folder', 'move', params, 'result', cb);\n};\n\nvar folderChangeMode = function(folder_id, mode, cb) {\n  var params = {\n    folder_id: folder_id,\n    mode: mode\n  };\n\n  return _itemMethodHelper('folder', 'change_mode', params, 'folder', cb);\n};\n\nvar trashcanContent = function(cb) {\n  return _itemMethodHelper('trashcan', 'content', {}, null, cb);\n};\n\nvar trashcanEmpty = function(options, cb) {\n  let args = Array.prototype.slice.call(arguments), \n      params = {};\n\n  cb = args.pop();\n  if (args.length === 1) {\n    params = options;\n  }\n\n  return _itemMethodHelper('trashcan', 'empty', params, 'result', cb);\n};\n\nvar trashcanRestore = function(options, cb) {\n  let args = Array.prototype.slice.call(arguments), \n      params = {};\n\n  cb = args.pop();\n  if (args.length === 1) {\n    params = options;\n  }\n\n  return _itemMethodHelper('trashcan', 'restore', params, 'result', cb);\n};\n\nvar remoteCreate = function(url, options, cb) {\n  let args = Array.prototype.slice.call(arguments), \n      params = {};\n\n  cb = args.pop();\n  if (args.length === 2) {\n    params = options;\n  }\n  params.url = url;\n\n  return _itemMethodHelper('remote', 'create', params, '', cb);\n};\n\nvar remoteDelete = function(job_id, cb) {\n  var params = {\n    job_id: job_id\n  };\n\n  return _itemMethodHelper('remote', 'delete', params, 'result', cb);\n};\n\nvar remoteInfo = function(options, cb) {\n  let args = Array.prototype.slice.call(arguments), \n      params = {};\n\n  cb = args.pop();\n  if (args.length === 1) {\n    params = options;\n  }\n\n  return _itemMethodHelper('remote', 'info', params, '', cb);\n};\n\nvar onetimeCreate = function(file_id, options, cb) {\n  let args = Array.prototype.slice.call(arguments), \n      params = {};\n\n  cb = args.pop();\n  if (args.length === 2) {\n    params = options;\n  }\n  params.file_id = file_id;\n\n  return _itemMethodHelper('one_time_download', 'create', params, 'download', cb);\n};\n\nvar onetimeInfo = function(options, cb) {\n  let args = Array.prototype.slice.call(arguments), \n      params = {};\n  cb = args.pop();\n  if (args.length === 1) {\n    params = options;\n  }\n\n  return _itemMethodHelper('one_time_download', 'info', params, '', cb);\n};\n\n\n// this is the entry point for your library\nvar AFClient = {\n  _setToken: function(newToken) {\n    token = newToken;\n  },\n  _setBaseUrl: function(newBaseUrl) {\n    base_url = newBaseUrl;\n  },\n  ApiError: ApiError,\n  NetworkError: NetworkError,\n  userLogin: userLogin,\n  userInfo: userInfo,\n  fileUpload: fileUpload,\n  fileRename: fileRename,\n  fileDelete: fileDelete,\n  fileMove: fileMove,\n  fileCopy: fileCopy,\n  fileChangeMode: fileChangeMode,\n  folderInfo: folderInfo,\n  folderContent: folderContent,\n  folderCreate: folderCreate,\n  folderRename: folderRename,\n  folderDelete: folderDelete,\n  folderCopy: folderCopy,\n  folderMove: folderMove,\n  folderChangeMode: folderChangeMode,\n  trashcanContent: trashcanContent,\n  trashcanEmpty: trashcanEmpty,\n  trashcanRestore: trashcanRestore,\n  remoteCreate: remoteCreate,\n  remoteDelete: remoteDelete,\n  remoteInfo: remoteInfo,\n  onetimeCreate: onetimeCreate,\n  onetimeInfo: onetimeInfo,\n\n  promised: {}\n};\n\nlet except = ['_setToken', '_setBaseUrl', 'ApiError', 'NetworkError'];\nObject.keys(AFClient).forEach(key => {\n  let method = AFClient[key];\n  // check if it's an API method\n  if (except.indexOf(key) >= 0 || typeof method !== 'function') {\n    return;\n  }\n\n  AFClient.promised[key] = function() {\n    let args = Array.prototype.slice.call(arguments);\n    return new Promise((resolve, reject) => {\n      let cb = function (err, result) {\n        if (err) { reject(err); } else { resolve(result); }\n      };\n      args.push(cb);\n\n      AFClient[key].apply(null, args);\n    });\n  }\n});\n\nexport default AFClient\n"]}